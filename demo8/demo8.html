<!-- demo8.html -->

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>demo8</title>

	<style type="text/css">

	* {
		margin: 0px; 
		padding: 0px;
	}

	.container {
		width: 90%;
		height: 1200px;
		border: 1px solid red;
		margin: 0 auto;
	}

	.div1 {
		width: 100%;
		height: 900px;
		border: 1px solid red;
	}

	.div2 {
		width: 100%;
		height: 100px;
		border: 1px solid red;
	}

	.div3 {
		width: 100%;
		height: 200px;
		border: 1px solid red;
		background: blue;
	}

	.div4 {
		width: 90%;
		height: 200px;
		border: 1px solid red;
		margin: 20px auto;

	}

	.box {
		width: 200px;
		height: 100%;
		float: left;
		background: #CCC;
	}

	img {
		width: 100%;
		height: 200px;
		background: #CCC;
	}

</style>

</head>
<body>
	<div class="div4">

		<div class="box">
			<img datasrc="img/app1.png" src="img/loading.gif" id="img1">
		</div>
		<div class="box">
			<img datasrc="img/app2.png" src="img/loading.gif" id="img2">
		</div>
		<div class="box">
			<img datasrc="img/app3.png" src="img/loading.gif" id="img3">
		</div>
		<div class="box">
			<img datasrc="img/app4.png" src="img/loading.gif" id="img4">
		</div>


	</div>
	
	<div class="container">
		<!-- <div class="div1" id="div1"></div>
		<div class="div2" id="div2"></div>
		<div class="div3" id="div3"></div> -->
	</div>

	<div class="div4">

		<div class="box">
			<img datasrc="img/app1.png" src="img/loading.gif" id="img1">
		</div>
		<div class="box">
			<img datasrc="img/app2.png" src="img/loading.gif" id="img2">
		</div>
		<div class="box">
			<img datasrc="img/app3.png" src="img/loading.gif" id="img3">
		</div>
		<div class="box">
			<img datasrc="img/app4.png" src="img/loading.gif" id="img4">
		</div>


	</div>

	<div class="container"></div>

	<div class="div4">

		<div class="box">
			<img datasrc="img/app1.png" src="img/loading.gif" id="img1">
		</div>
		<div class="box">
			<img datasrc="img/app2.png" src="img/loading.gif" id="img2">
		</div>
		<div class="box">
			<img datasrc="img/app3.png" src="img/loading.gif" id="img3">
		</div>
		<div class="box">
			<img datasrc="img/app4.png" src="img/loading.gif" id="img4">
		</div>


	</div>



	<script type="text/javascript" src="js/jquery.min.js"></script>

	<script type="text/javascript">

	// 绑定滚动事件

	$(document).bind('scroll', function() {

		imgLoad();
	});
	

	function imgLoad() {
		var windowHeight = $(window).height();
		var scrollHeight = $(window).scrollTop();
		var div4Height = $('.div4').offset().top;

		// console.log(windowHeight + " " + scrollHeight + " " + div4Height);

		if (windowHeight + scrollHeight >= div4Height) {
			$('.div4').find('img').each(function() {
				var imgsrc = $(this).attr('datasrc');

				var that = $(this);

				setTimeout(function() {
					that.attr('src', imgsrc);
				},2000)

				// $(this).attr('src', imgsrc);
			});
		}
	}


		
	imgLoad();











	//绑定滚动事件
	// $(document).bind('scroll', function() {
	// 	var windowHeight = $(window).height();
	// 	var scrollHeight = $(window).scrollTop();
	// 	var div2Height = $('#div2').offset().top;

	// 	// console.log(windowHeight + " " + scrollHeight + " " + div2Height);

	// 	if (windowHeight + scrollHeight >= div2Height) {
	// 		$('#div1').css('background','red');
	// 		// $('#div3').css('display', 'none');
	// 	}

	// });


	// var marginAll = $('.div4').width();
	// var childNum = $('.div4').children().length;
	// var childWidth = $('.div4').children().width();
	// console.log(marginAll);
	// console.log(childNum);
	// console.log(childWidth);

	// var marginAve = (marginAll - childWidth*childNum)/(childNum-1);
	// console.log(marginAve);
	// // marginAve = Math.floor(marginAve);
	// console.log(marginAve);
	// $('.div4').children().css('margin-left', marginAve+'px');
	// $($('.div4').children().get(0)).css('margin-left', '0px');
	// $('#div4').


	// var marginAll = $('.div4').width();
	// var childNum = $('.div4').children().length;
	// var childWidth = $('.div4').children().width();
	// var marginAve = (marginAll - childWidth*childNum)/childNum;
	// $('.div4').children().css('margin-left', marginAve/2+'px');
	// $('.div4').children().css('margin-right', marginAve/2+'px');



</script>
</body>
</html>