<!DOCTYPE html>
<html>
<head>
	<title>json demo</title>
	<meta charset="utf-8">
</head>

<style type="text/css">

.boxs {
	/*width: 250px; 
	height: 250px;*/
	width: 350px; 
	height: 350px;
	/*width: 450px; 
	height: 450px;*/
	border: 2px solid #000;
	background: #C0C0C0;
	margin: 50px auto;
	text-align: center;
	/*vertical-align: middle;*/
}

.boxitems {	
	/*margin:2% auto; */
	margin-top: 20px;
}


.item {
	display: inline-block;
	/*width: 400px;*/
	height: 400px;
	line-height: 400px;
	height:auto;
	margin: auto;
}


.item div {
	width: 100px;
	height: 100px;
	background: blue;
	margin: 0px;
	float: left;
	text-align: center;
	line-height: 100px;
	color: #FFF;
	font-size: 50px;
	border: 1px solid;
}

.item img {
	width: 100px;
	height: 100px;
	background: blue;
	margin: 0px;
	float: left;
	text-align: center;
	line-height: 100px;
	color: #FFF;
	font-size: 50px;
	border: 1px solid;
}

.buttons {
	width: 400px;
	height: 100px;
	margin: auto;
	display: block;
}

.buttons button {
	margin: 0px 20px;
	width: 80px;
	height: 50px;
	background: rgb(18,138,188);
}


</style>

<body>
	
	<!-- 3阶九宫格 -->
	<!-- <div class="boxs">
		<div class="boxitems">
			<div class="item">
				<div id="box-0" onclick="swap(0)">1</div>
				<div id="box-1" onclick="swap(1)">2</div>
				<div id="box-2" onclick="swap(2)">3</div>
			</div>
			<div class="item">
				<div id="box-3" onclick="swap(3)">4</div>
				<div id="box-4" onclick="swap(4)">5</div>
				<div id="box-5" onclick="swap(5)">6</div>
			</div>
			<div class="item">
				<div id="box-6" onclick="swap(6)">7</div>
				<div id="box-7" onclick="swap(7)">8</div>
				<div id="box-8" onclick="swap(8)"></div>
			</div>
		</div>
	</div> -->

	<!-- 2阶九宫格 -->
	<!-- <div class="boxs">
		<div class="boxitems">
		<div class="item">
			<div id="box-0" onclick="swap(0)">1</div>
			<div id="box-1" onclick="swap(1)">2</div>
		</div>
		<div class="item">
			<div id="box-2" onclick="swap(2)">3</div>
			<div id="box-3" onclick="swap(3)"></div>
		</div>
		</div>
	</div> -->

	<!-- 4阶九宫格 -->
	<!-- <div class="boxs">
		<div class="boxitems">
			<div class="item">
				<div id="box-0" onclick="swap(0)">1</div>
				<div id="box-1" onclick="swap(1)">2</div>
				<div id="box-2" onclick="swap(2)">3</div>
				<div id="box-3" onclick="swap(3)">4</div>
			</div>
			<div class="item">
				<div id="box-4" onclick="swap(4)">5</div>
				<div id="box-5" onclick="swap(5)">6</div>
				<div id="box-6" onclick="swap(6)">7</div>
				<div id="box-7" onclick="swap(7)">8</div>
			</div>
			<div class="item">
				<div id="box-8" onclick="swap(8)">9</div>
				<div id="box-9" onclick="swap(9)">10</div>
				<div id="box-10" onclick="swap(10)">11</div>
				<div id="box-11" onclick="swap(11)">12</div>
			</div>
			<div class="item">
				<div id="box-12" onclick="swap(12)">13</div>
				<div id="box-13" onclick="swap(13)">14</div>
				<div id="box-14" onclick="swap(14)">15</div>
				<div id="box-15" onclick="swap(15)"></div>
			</div>
		</div>
	</div> -->

	<div class="boxs">
		<div class="boxitems">
		<div class="item">
				<div id="box-0" onclick="swap(0)" name='1'><img src="img/_0.jpg"></div>
				<div id="box-1" onclick="swap(1)" name='2'><img src="img/_1.jpg"></div>
				<div id="box-2" onclick="swap(2)" name='3'><img src="img/_2.jpg"></div>
			</div>
			<div class="item">
				<div id="box-3" onclick="swap(3)" name='4'><img src="img/_3.jpg"></div>
				<div id="box-4" onclick="swap(4)" name='5'><img src="img/_4.jpg"></div>
				<div id="box-5" onclick="swap(5)" name='6'><img src="img/_5.jpg"></div>
			</div>
			<div class="item">
				<div id="box-6" onclick="swap(6)" name='7'><img src="img/_6.jpg"></div>
				<div id="box-7" onclick="swap(7)" name='8'><img src="img/_7.jpg"></div> 
				<div id="box-8" onclick="swap(8)" name='9'></div>
			</div>
		</div>
		</div>

		<div style="width: 100%; height: 100px; margin-top: 20px;">
			<div class="buttons">
				<button onclick="upsetBox2(8)">打乱</button>
				<button onclick="startTimeout()" id="start">开始</button>
				<button onclick="resetBox2()">还原</button>
			</div>
		</div>



		<script type="text/javascript">


	//修改blank不显示最后一个方块值
	//修改nums显示方块值
	var blank = '8';
	var nums = [1,2,3,4,5,6,7,8,9];
	// var nums = [1,2,3,4];
	// var blank = 3;
	// var nums = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];
	// var blank = 15;


	var imgs = [
	'<img src="img/_0.jpg">',
	'<img src="img/_1.jpg">',
	'<img src="img/_2.jpg">',
	'<img src="img/_3.jpg">',
	'<img src="img/_4.jpg">',
	'<img src="img/_5.jpg">',
	'<img src="img/_6.jpg">',
	'<img src="img/_7.jpg">',
	'<img src="img/_8.jpg">'
	];

	var debug = false;
	var t = 0;
	var count = 0;
	// var LENGTH = 9;

	function startTimeout() 
	{
		document.getElementById('start').innerHTML = count;
		count = count + 1;
		t=setTimeout("startTimeout()",1000);
	}


	//打乱顺序
	function upsetBox(m)
	{
		
		for (var i = 0; i < nums.length; i++) 
		{

			//获取0-m的随机数
			var random = Math.random()*m;
			var floor = Math.floor(random);
			// console.log(floor);

			//交换位置
			var temp;
			temp = nums[floor];
			nums[floor] = nums[i];
			nums[i] = temp;

		}

		// console.log(nums);

		//赋值
		for (var i = 0; i < nums.length; i++) 
		{
			//获取盒子
			var num = document.getElementById('box-'+i);
			// console.log(num);
			if(nums[i] != nums.length) 
			{
				console.log(num.innerHTML);
				num.innerHTML = nums[i];
			}
			else 
			{
				num.innerHTML = '';
				blank = i;
			}
			
		}
	}

	function upsetBox2(m)
	{
		
		for (var i = 0; i < nums.length; i++) 
		{

			//获取0-m的随机数
			var random = Math.random()*m;
			var floor = Math.floor(random);
			// console.log(floor);

			//交换位置
			var temp;
			temp = nums[floor];
			nums[floor] = nums[i];
			nums[i] = temp;

		}

		// console.log(nums);

		//赋值
		for (var i = 0; i < nums.length; i++) 
		{
			//获取盒子
			var num = document.getElementById('box-'+i);
			// console.log(num);
			if(nums[i] != nums.length) 
			{
				// console.log(num);
				num.innerHTML = imgs[nums[i]-1];
			}
			else 
			{
				num.innerHTML = '';
				blank = i;
			}
			
		}
	}

	//还原顺序
	function resetBox() 
	{
		// 顺序位置
		for (var i = 0; i < nums.length; i++) 
		{
			nums[i] = i+1;
		}

		//赋值
		for (var i = 0; i < nums.length; i++) 
		{
			//获取盒子
			var num = document.getElementById('box-'+i);
			if(nums[i] != nums.length) 
			{
				num.innerHTML = nums[i];
			}
			else
			{
				num.innerHTML = '';
				blank = i;
			}
		}
	}

	//还原顺序
	function resetBox2(m) 
	{
		// 顺序位置
		for (var i = 0; i < nums.length; i++) 
		{
			nums[i] = i+1;
		}

		// console.log(nums);
		//赋值
		for (var i = 0; i < nums.length; i++) 
		{
			//获取盒子
			var num = document.getElementById('box-'+i);
			if(nums[i] != nums.length) 
			{
				num.innerHTML = imgs[nums[i]-1];
			}
			else
			{
				num.innerHTML = '';
				blank = i;
			}
		}
	}


	//交换位置
	function swap(id)
	{

		//获取点击的元素
		var num = document.getElementById('box-'+id);

		//获取空格的元素
		var kong = document.getElementById('box-'+blank);

		//获取差值绝对值
		var diff = Math.abs(id-blank);

		//当空格在第一列时，判断点击的列数是否为0，1
		var a = (blank%3 == 0) && (id%3 == 0 || id%3 == 1);
		//当空格在第二列时
		var b = (blank%3 == 1);
		//当空格在第三列时，判断点击的列数是否为1，2
		var c = (blank%3 == 2) && (id%3 == 1 || id%3 == 2);
		//判断差值是否为1或3
		var d = (diff == 1) || (diff == 3);
		
		// console.log(id)
		// console.log(blank);
		// console.log('id:'+id+'  blank:'+blank+"  diff:"+diff);
		// console.log('a:'+a+'  b:'+b+'  c:'+c+'  d:'+d);

		//判断点击的div是否可移动,条件：满足d同时满足a、b、c其中一项
		if ( debug || ( (a||b||c) && d ) ) 
		{
			kong.innerHTML = num.innerHTML;
			num.innerHTML = '';
			blank = id;


			if (isSuccess2()) 
			{
				alert("所用时间：" + count + "秒");
				count = 0;
			}
		}
	}

	//判断是否成功
	function isSuccess() 
	{
		for(var i = 0; i < nums.length-1; i++)
		{
			var temp = document.getElementById('box-'+i);
			var inner = temp.innerHTML;

			if (inner != i+1) 
			{

				return false;
			}
		}

		return true;
	}

	//判断是否成功
	function isSuccess2() 
	{
		for(var i = 0; i < nums.length-1; i++)
		{
			var temp = document.getElementById('box-'+i);
			var inner = temp.innerHTML;

			var img = '<img src="img/_'+i+'.jpg">';
			// console.log(img);
			// console.log(inner);

			if (inner != img) 
			{

				return false;
			}
		}

		return true;
	}

</script>
</body>
</html>